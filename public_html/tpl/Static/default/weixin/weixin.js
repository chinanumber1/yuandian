!function(a,b){function c(){g(!0),d(),b.onresize=g,b.onscroll=function(){h(),P.parallaxFun[0]()},P.setCurrent(1),e()}function d(){a("body").bind("keyup",function(a){if(a.preventDefault(),0!=P._count)return!1;var b=a.keyCode,c=P.getCurrent();38==b?c=1==c?c=4:--c:40==b&&(c=4==c?c=1:++c),Q.find("#nav-"+c).trigger("click")})}function e(){f(),a("body").on("click",function(b){return"web"==b.target.id?!0:(0==a(b.target).closest("#web-tip").size()&&(Z.hasClass("hide")||1==P.getCurrent()&&P.animateFuns[0](),Z.addClass("hide")),void 0)})}function f(){a("#btn").on("click",function(){a("#weixin").trigger("click")})}function g(c){var d=a(b).height()-a("#header").height()+20;R=H.offset().top,S=I.offset().top,T=J.offset().top,C.height(d),l(),P._isFadeOut||P.clear("page-1",1,c),m()}function h(){var b=a(document).scrollTop(),c=Q.find("a");c.removeClass("active"),R>b?U.addClass("active"):b>=R&&S>b?V.addClass("active"):b>=S&&T>b?W.addClass("active"):X.addClass("active")}function i(b){var c=Y.find("li").removeClass("active").end().find("."+b).addClass("active").attr("view");a("#"+$).addClass("hide"),$=c,a("#"+c).removeClass("hide").find(".captcha-box").find("img").trigger("click")}function j(){clearTimeout(_),1==P.getCurrent()&&clearInterval(P.animateId),A.hasClass("hide")&&A.removeClass("hide"),B.hasClass("hide")&&B.removeClass("hide"),m()}function k(){B.addClass("hide"),A.addClass("hide"),1==P.getCurrent()&&P.animateFuns[0]()}function l(){K.attr("style",""),L.attr("style","")}function m(){var c=b,d=a(c).height(),e=A.height(),f=E.width(),g=A.width(),h=Math.floor((f-g)/2),i=Math.floor((d-e)/2);A.css({left:h,top:i}),B.css({height:d,width:f})}function n(){_=setTimeout(function(){var a=P.getCurrent()/1;ab?(a++,5==a&&(a=3,ab=!1)):(a--,0==a&&(a=2,ab=!0)),Q.find("#nav-"+a).trigger("click",[!0]),n()},5e3)}var o=a("#nail"),p=a("#cloud"),q=a("#map"),r=a("#shop"),s=a("#function"),t=a("#v-phone"),u=a("#phone_1"),v=a("#phone_2"),w=a("#gift_1"),x=a("#gift_2"),y=a("#ballon"),z=a("#description"),A=a("#pop"),B=a("#shade"),C=a(".page"),D=a("#close"),E=a("body"),F=a(".phone"),G=F.position().top,H=a("#page-2"),I=a("#page-3"),J=a("#page-4"),K=a(".phone-wrapper"),L=a(".fixed"),M=a("#content"),N=H.offset().top,O=I.offset().top,P={_current:0,_count:0,_nailCanPallax:!1,_shopCanPallax:!1,_switching:!1,_isFadeOut:!1,_nailFixedTop:void 0,_shopFixedTop:void 0,toFixedPosition:function(b){if("fixed"!=b.css("position")){var c=b.offset().top-a(document).scrollTop();return c}},fadeOut:function(a){P._isFadeOut=!0,E.stop(!0,!0).animate({opacity:"0"},350,a)},fadeIn:function(a){E.stop(!0,!0).animate({opacity:"1"},350,a)},clear:function(c,d,e){var f=function(){b.scrollTo(0,a("#"+c).offset().top),"page-1"==c&&K.attr("style",""),o.attr("style",""),p.attr("style",""),p.css("left",.79*a(b).width()),q.attr("style",""),r.attr("style",""),s.attr("style",""),t.attr("style",""),u.attr("style",""),v.attr("style",""),w.attr("style",""),x.attr("style",""),y.attr("style",""),L.css({top:P.toFixedPosition(L),left:M.offset().left/1+660}).css("position","fixed"),N=H.offset().top,O=I.offset().top,P._nailFixedTop=void 0,P._shopFixedTop=void 0,P._nailCanPallax=!1,P._shopCanPallax=!1,P.fadeIn(function(){P._isFadeOut=!1,P.setCurrent(d)})};e?f():this.fadeOut(f)},setCurrent:function(a){"fixed"!=L.css("postion")&&L.css({top:P.toFixedPosition(L),left:M.offset().left/1+660}).css("position","fixed"),this.animate(a),this._current=a},getCurrent:function(){return this._current},animateId:"",description:[["0",11],["-63px",16],["-129px",21],["-193px",26],["",0]],frontAnimateFuns:[function(){},function(){P._count++,p.animate({opacity:0,left:0-(.21*a(b).width()+156)+"px"},1e3,function(){P._count--,P._nailCanPallax=!0,P.parallaxFun[1]()})},function(){P._count++,s.stop(!1,!0).animate({opacity:0,top:"-378px"},1e3,function(){P._count--,P._shopCanPallax=!0,P.parallaxFun[2]()})},function(){},function(){}],backAnimateFuns:[function(){},function(){P._count++,q.css("position","absolute").css("top","auto"),o.animate({opacity:0,top:"-462px"},1e3,function(){P._count--}),P._count++,p.animate({opacity:0,left:.79*a(b).width()},1e3,function(){P._count--})},function(){r.css("position","absolute").css("top","-232px"),P._count++,s.stop(!1,!0).animate({opacity:0,top:"-600px"},300,function(){P._count--}),P._count++,r.stop(!1,!0).animate({opacity:0,top:"-454px"},500,function(){P._count--})},function(){P._count++,x.animate({left:"137px"},{step:function(a){var b=292-a;w.css("left",b-30+"px")},duration:500,complete:function(){P._count--}}),P._count++,a({deg:20}).animate({deg:0},{duration:500,step:function(a){u.rotate({angle:a,center:["92%","98%"]})},complete:function(){P._count--}}),P._count++,y.animate({opacity:0,top:"-200px"},500,function(){P._count--})},function(){}],animateFuns:[function(){var b=a("#wheel-1"),c=a("#wheel-2"),d=a("#wheel-3"),e=a("#wheel-4");return function(){var a=0;clearInterval(P.animateId),P.animateId=setInterval(function(){a+=3,b.rotate(a),c.rotate(a),d.rotate(a),e.rotate(a)},20)}}(),function(){"fixed"==o.css("position")?(o.css({position:"absolute",top:"-67px",left:"149px"}),P._nailCanPallax=!1):(P._count++,o.animate({opacity:1,top:"-67px"},1e3,function(){P._count--})),P._count++,p.animate({opacity:1,left:"-69px"},1e3,function(){P._count--}),s.attr("style","")},function(){"fixed"==r.css("position")?(r.css({position:"absolute",top:"-232px",left:"101px"}),P._shopCanPallax=!1,P._count++,s.stop(!1,!0).animate({opacity:1,top:"-378px"},1e3,function(){P._count--,t.attr("style","")})):(P._count++,r.stop(!1,!0).animate({opacity:1,top:"-232px"},1e3,function(){s.stop(!1,!0).animate({opacity:1,top:"-378px"},1e3,function(){P._count--,t.attr("style","")})})),u.attr("style",""),y.attr("style","")},function(){P._count++,J.css("left",50),x.animate({left:"300px"},{step:function(a){var b=a-137;w.css("left",125-b+"px")},duration:1e3,complete:function(){a({deg:0}).animate({deg:20},{duration:500,step:function(a){u.rotate({angle:a,center:["92%","98%"]})},complete:function(){P._count--}}),P._count++,y.animate({opacity:1,top:"-266px"},500,function(){P._count--})}})},function(){}],parallaxFun:[function(){K.css({top:P.toFixedPosition(K),left:M.offset().left+20}).css("position","fixed"),a("#page-1").css("left",20),P.end();var c=a(document).scrollTop();F.css("top",G-.7*c),P._nailCanPallax&&(P._nailFixedTop||(P._nailFixedTop=b.parseInt(o.css("top"))),o.css("top",P._nailFixedTop-.5*(c-N))),P._shopCanPallax&&(P._shopFixedTop||(P._shopFixedTop=b.parseInt(r.css("top"))),r.css("top",P._shopFixedTop-.5*(c-O)))},function(){q.css("top",P.toFixedPosition(q)).css("position","fixed"),o.css("top",P.toFixedPosition(o)).css("position","fixed").css("left",q.offset().left/1+149+"px"),P._nailCanPallax=!0},function(){t.css("top",P.toFixedPosition(t)).css("position","fixed"),r.css("top",P.toFixedPosition(r)).css("position","fixed").css("left",t.offset().left/1+101+"px"),P._shopCanPallax=!0},function(){},function(){}],animate:function(a){a!=this._current&&(this.end(),z.css({"background-position":"0 "+P.description[a-1][0],"z-index":P.description[a-1][1]}),this.animateFuns[a-1]())},end:function(){clearInterval(P.animateId)},parallax:function(){this.end()}};c();var Q=a("#primary").delegate("a","click",function(b,c){if(b.preventDefault(),0!=P._count)return!1;c||clearInterval(_);var d=a(this).attr("href").split("#")[1],e=d.split("-")[1];if(Math.abs(P.getCurrent()-e)>1)return P.clear(d,e),void 0;3==e&&setTimeout(function(){t.animate({opacity:"1"},3e3)},1e3),2==P.getCurrent()?1==e?P.backAnimateFuns[1]():3==e&&P.frontAnimateFuns[1]():3==P.getCurrent()?2==e?P.backAnimateFuns[2]():4==e&&P.frontAnimateFuns[2]():4==P.getCurrent()&&3==e&&P.backAnimateFuns[3]();var f=a("body,html"),g=setInterval(function(){0==P._count&&(f.animate({scrollTop:a("#"+d).offset().top},800,function(){h(),P._switching=!1,P.setCurrent(e)}),clearInterval(g))},200)}),R=H.offset().top,S=I.offset().top,T=J.offset().top,U=a("#nav-1"),V=a("#nav-2"),W=a("#nav-3"),X=a("#nav-4"),Y=a("#devices"),Z=a("#web-tip"),$="android-view";Y.delegate("li","click",function(){var a=this.className.split(" ")[2];i(a)}),a("#menu").delegate("a","click",function(){var b=a(this).attr("id");return"web"==b?(Z.hasClass("hide")?(clearTimeout(_),1==P.getCurrent()&&clearInterval(P.animateId)):1==P.getCurrent()&&P.animateFuns[0](),Z.toggleClass("hide"),void 0):(i(b),j(),void 0)}),D.bind("click",function(){k()}),a(document).bind("mousewheel DOMMouseScroll",function(a){if(a.preventDefault(),clearTimeout(_),0!=P._count)return!1;if(!P._switching&&A.hasClass("hide")){P._switching=!0;var b,c=parseInt(a.originalEvent.wheelDelta||-a.originalEvent.detail);b=0>c?P.getCurrent()/1+1>4?4:P.getCurrent()/1+1:P.getCurrent()-1<1?1:P.getCurrent()-1,Q.find("#nav-"+b).trigger("click")}}),n();var _,ab=!0}(jQuery,window);